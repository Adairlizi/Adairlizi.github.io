# MQ

## 消息中间件概述

### 什么是消息中间件

- 利用高效可靠的消息传递机制进行平台无关的数据交流；
- 并基于数据通信来进行分布式系统的集成；
- 通过提供消息传递和消息队列模型，它可以在分布式环境下扩展进程间的通信；

### 消息中间件的应用场景

- 跨系统数据传递；
- 高并发流量削峰；
- 数据异步处理；

### 常用的消息中间件

​		ActiveMQ、RabbitMQ、Kafka、RocketMQ

### 本质

​		接收请求、保存数据、发送数据的网络应用。

​		与一般网络应用程序的区别是塔主要负责数据的接收和传递，所以性能一般都高于普通程序。

### 5大核心组成

- 协议
- 持久化机制
- 消息分发机制
- 高可用设计
- 高可靠设计 

#### 协议

是指计算机之间通信是共同遵从的一组约定，都遵守相同的约定，计算机之间才能相互交流。

是对数据格式和计算机之间交换数据时必须遵守的规则的正式描述。

##### 协议三要素：

1. 语法：既数据与控制信息的结构或格式；
2. 语义：既需要发出何种控制信息，完成何种动作以及做出何种响应；
3. 时序：既事件顺序的详细说明；

##### 为什么不使用http协议

比较复杂例如请求头、短链接。中间件是长链接，要经常发送消息和接收消息。 

#### AMQP协议

特性：事务支持、持久化支持，出生金融行业，在可靠性消息处理上具备天然的优势。

#### MQTT协议

特性：轻量、结构简单、传输快、没有事务支持、没有持久化相关设计

场景：计算能力有限、地宽带、网络不稳定的场景。

#### Open Message协议

特性：结构简单、解析快、有事务设计、有持久化设计

#### Kafka协议

基于TCP的二进制协议。消息内部是通过长度来分隔的，有一些基本数据类型组成

特性：结构简单、解析快、无事务设计、有持久化设计

#### 持久化

就是将数据存入磁盘，而不是存在内存中随着服务重启而消失，使数据能够永久保存就要持久化。

 

































